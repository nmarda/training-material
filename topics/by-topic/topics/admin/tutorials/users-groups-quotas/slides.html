<!DOCTYPE html>
<html>









  <head>
    <meta charset="utf-8">
    <title>User, Group and Quota managment</title>
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-45719423-18' , 'auto');
        ga('send', 'pageview');
    </script>
    
    <link rel="stylesheet" href="/training-material/assets/css/slides.css">
    <link rel="stylesheet" href="/training-material/assets/css/font-awesome.css" id="theme">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />

    
    
    
    
    <meta name="description" content="Resources related to configuration and maintenance of Gal..." />
    <meta property="og:title" content="Galaxy Training: User, Group and Quota managment" />
    <meta property="og:description" content="Resources related to configuration and maintenance of Gal..." />
    <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png" />
    <script type="application/ld+json">
      


{
  "@context": "http://schema.org",
  "@type": "Course",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "Short descriptions are present but long descriptions will be needed for non-visual users",
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "User, Group and Quota managment",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "license": "/blob//LICENSE.md",
  "producer": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "provider": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "courseCode": "admin / users-groups-quotas / slides",
  "learningResourceType": "slides",
  "name": "Slides for 'User, Group and Quota managment' tutorial",
  "isPartOf": {
    "@type": "Course",
    "name": "User, Group and Quota managment",
    "description": "User, Group and Quota managment",
    "learningResourceType": "tutorial",
    "interactivityType": "expositive",
    "provider": {
      "@type": "Organization",
      "email": "galaxytrainingnetwork@gmail.com",
      "name": "Galaxy Training Network",
      "url": "https://galaxyproject.org/teach/gtn/"
    }
  },
  "url": "https://galaxyproject.github.io//training-material/topics/admin/tutorials/users-groups-quotas/slides.html",
  "timeRequired": "PT1H",
  "description": "User, Group and Quota managment\\nThe questions this  addresses are:\n - How does Galaxy manage users and groups?\n - How can I assign Quotas to specific users/groups?\n\n\\nThe objectives are:\n - Learn the Galaxy user/group management and assign Quotas.\n - Understand the Role Based Access Control (RBAC) of Galaxy.\n\n",
  "hasPart": [

  ],
  "mentions": [
    {
      "@type": "Thing",
      "url": "",
      "name": "Training data for User, Group and Quota managment tutorial"
    }
  ],
  "author": [
    {
      "@type": "Person",
      "name": "Nate Coraor"
    },
    {
      "@type": "Person",
      "name": "Björn Grüning"
    }
  ],
  "contributor": [
    {
      "@type": "Person",
      "name": "Nate Coraor"
    },
    {
      "@type": "Person",
      "name": "Björn Grüning"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Galaxy Server administration",
      "description": "Resources related to configuration and maintenance of Galaxy servers",
      "url": "https://galaxyproject.github.io//training-material/topics/admin/"
    }
  ]
}
    </script>
  </head>
  <body>
    <textarea id="source">
name: inverse
layout: true
class: center, middle, inverse

<div class="my-header"><span>
<a href="/training-material/topics/admin" title="Return to topic page" ><i class="fa fa-level-up" aria-hidden="true"></i></a>

<a class="nav-link" href="https://github.com/galaxyproject/training-material/edit/master/topics/admin/tutorials/users-groups-quotas/slides.html"><i class="fa fa-pencil" aria-hidden="true"></i></a>

</span></div>

<div class="my-footer"><span>

<img src="/training-material/assets/images/GTN-60px.png" alt="Galaxy Training Network" style="height: 40px;"/>

</span></div>

---

# User, Group and Quota managment



.footnote[Tip: press `P` to view the presenter notes]

???
Presenter notes contain extra information which might be useful if you
intend to use these slides for teaching.

Press `P` again to switch presenter notes off

---





### &lt;i class=&quot;fa fa-question-circle&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;question&lt;/span&gt; Questions


- How does Galaxy manage users and groups?

- How can I assign Quotas to specific users/groups?


---


### &lt;i class=&quot;fa fa-bullseye&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;objectives&lt;/span&gt; Objectives


- Learn the Galaxy user/group management and assign Quotas.

- Understand the Role Based Access Control (RBAC) of Galaxy.


---


class: special, center, middle

# Users, Groups, Quotas

.footnote[\#usegalaxy / @galaxyproject]

---

class: left
## Overview

This section will cover handling of users, groups and quotas for Galaxy. We will look at the following in particular:
* User Activation and Control
* User Passwords and Session Policies
* Setting Admin users and admin control of users
* User Privacy
* Roles and Groups
* Setting permissions on Libraries and Datasets
* Quotas
* Introduction to alternate authentication
---

class: left
## User Activation

Require verification that a user's email is real. You must enable SMTP first.

In `galaxy.yml`:
* `user_activation_on` require users to click link in email before running jobs.
* `activation_grace_period` time (hours) that a user can 'explore' Galaxy before activation lockout.
* `inactivity_box_content` message provided to non-activated users.
* Disposable domain blacklist
  * `blacklist_file` defines domains in XXX.YYY format that will be rejected as user emails.


Exercise:
   - Enable User activation
   - Register a new user (second email / email+1@domail.tld)
   - Upload a Dataset
---

class: left
## User Control

In `galaxy.yml`:
* `require_login` can be enabled to prevent anonymous access.
* `show_welcome_with_login` show welcome page next to login page
* `allow_user_creation` allow user registration. When False, admins must create users; often coupled with `require_login`.
* `allow_user_dataset_purge` users can purge (permanently delete) their datasets.
* `api_allow_run_as` list of email addresses of API users who can make calls on behalf of other users.
* `expose_dataset_path` users to see the full path of datasets via the &quot;View Details&quot; option in the history.

---
class: left
## Password &amp; Session Policies

In `galaxy.yml`:
* `password_expiration_period` days before requiring a user to change password.
* `session_duration` minutes before invaliding a user's session, requiring re-login.

---

class: left
## Admin Control

In `galaxy.yml`:
* `admin_users` comma-separated list of admin users' emails
* `allow_user_deletion` admins can delete users
* `allow_user_impersonation` admins can become other users. Great for debugging / user assistance.
* `master_api_key` admin super-key allows many API admin actions without having a real admin user.

Exercise:
 - Enable user impersonation
 - Log in as admin and become other user
 - View existing and create Histories and Datasets.

---

class: left
## User Privacy

In `galaxy.yml`:
* `expose_user_name` users can view other registered usernames
* `expose_user_email` users can view other registered emails
* `new_user_dataset_access_role_default_private` newly created datasets are private to the creating user

---

class: left
## Roles and Groups

#### Role Based Access Control (RBAC)

**Admin** can:
* create roles (each user automatically has their own 'private' role)
* create groups
* assign roles to groups
* assign users to groups
* assign groups to roles
* assign users to roles
* assign permission sets to roles
* assign permission sets to groups

---

class: left
## Dataset Roles


.left-column50[
**manage permissions**
* Users who have associated role on a dataset can manage the roles associated it.

**access**
* Users having associated role can use/view/download a dataset for analysis. Users must have every role associated with a dataset in order to access it
]

.right-column50[.middle[.image-90[
![User_roles](../../images/dataset_roles.png)
]]]
---

## Library Roles


.left-column50[
* **modify library item**: Users having associated role can modify this library item
* **access library**: Restrict access to this library to only users having associated role
* **add library item**: Users having associated role can add library items to this library item
* **manage library permissions**: Users having associated role can manage roles associated with permissions on this library item
]
.left-column50[.image-90[
![Library_roles](../../images/Library_roles.png)
]]

---
class: left
## Role Demo

* We will now demonstrate creation of Groups and Roles.
* We will show how restricting access to a Dataset prevents usage or download.

---
class: left
## Quotas

Used to control user disk usage.

To turn on the use of quotas: In `galaxy.yml`:
* `enable_quotas` Enable enforcement of quotas.  Quotas can be set from the Admin interface (under Data).
* must create quotas in admin interface before any quota will be enforced, otherwise 'unlimited'

Amounts:
 - Examples: &quot;10000MB&quot;, &quot;99 gb&quot;, &quot;0.2T&quot;, &quot;unlimited&quot;
 - = / + / -

Default for user class:
 - None (No)
 - Unregistered Users
 - Registered Users

or associated with Groups or Users

---
class: left
## Alternate Authentication

* Galaxy-specific login using e-mail address and password
* HTTP remote user provided by any front-end Web server




---
### &lt;i class=&quot;fa fa-key&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;span class=&quot;visually-hidden&quot;&gt;keypoints&lt;/span&gt; Key points


- Galaxy has a powerful user and group managment system that can be utilized for Quota managment.







---

## Thank you!

This material is the result of a collaborative work. Thanks to the [Galaxy Training Network](https://wiki.galaxyproject.org/Teach/GTN) and all the contributors!


<div class="contributors-line">


<a href="/training-material/hall-of-fame#natefoo" class="contributor-badge"><img src="https://avatars.githubusercontent.com/natefoo" alt="Nate Coraor">Nate Coraor</a>, <a href="/training-material/hall-of-fame#bgruening" class="contributor-badge"><img src="https://avatars.githubusercontent.com/bgruening" alt="Björn Grüning">Björn Grüning</a>


</div>



<img src="/training-material/assets/images/GTN.png" alt="Galaxy Training Network" style="height: 100px;"/>



    </textarea>
    <script src="/training-material/assets/js/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({navigation: {scroll: false,}});
      var hljs = remark.highlighter.engine;
    </script>
  </body>
</html>
