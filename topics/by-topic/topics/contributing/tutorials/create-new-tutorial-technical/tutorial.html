<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Creating a new tutorial - Defining the technical infrastructure</title>
        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-45719423-18' , 'auto');
            ga('send', 'pageview');
        </script>
        
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap.min.css?v=3">
        <link rel="stylesheet" href="/training-material/assets/css/bootstrap-toc.min.css">
        <link rel="stylesheet" href="/training-material/assets/css/main.css?v=2">
        <link rel="stylesheet" href="/training-material/assets/css/font-awesome.css">
        <link rel="stylesheet" href="/training-material/assets/css/academicons.css">
        <link rel="stylesheet" href="/training-material/assets/css/syntax_highlighting.css">
        <link rel="shortcut icon" href="/training-material/favicon.ico" type="image/x-icon" />

        
        
        
        
        
        <meta name="description" content="Galaxy is a great solution to train the bioinformatics co..." />
        <meta property="og:title" content="Galaxy Training: Creating a new tutorial - Defining the technical infrastr..." />
        <meta property="og:description" content="Galaxy is a great solution to train the bioinformatics co..." />
        <meta property="og:image" content="/training-material/assets/images/GTNLogo1000.png" />
    </head>
    <body data-spy="scroll" data-target="#toc">
        











<header>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="/training-material/">
                <img src="/training-material/assets/images/GTN-60px.png" height="30" alt="Galaxy Training Network logo">
                Galaxy Training!
            </a>

            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#top-navbar" aria-controls="top-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/training-material/topics/contributing" title="Go back to list of tutorials">
                            <i class="fa fa-folder-o" aria-hidden="true"></i><span class="visually-hidden">topic</span> Contributing to the Galaxy Training Material
                        </a>
                    </li>

                    <li class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="EN">
                            EN
                        </a>
                        <div class="dropdown-menu">
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=fr&u=https%3A%2F%2Ftraining.galaxyproject.org%2Ftopics%2Fcontributing%2Ftutorials%2Fcreate-new-tutorial-technical%2Ftutorial.html&edit-text=&act=url" title="">
                                FR
                            </a>
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ja&u=https%3A%2F%2Ftraining.galaxyproject.org%2Ftopics%2Fcontributing%2Ftutorials%2Fcreate-new-tutorial-technical%2Ftutorial.html&edit-text=&act=url" title="">
                                JA
                            </a>
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=es&u=https%3A%2F%2Ftraining.galaxyproject.org%2Ftopics%2Fcontributing%2Ftutorials%2Fcreate-new-tutorial-technical%2Ftutorial.html&edit-text=&act=url" title="">
                                ES
                            </a>
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=pt&u=https%3A%2F%2Ftraining.galaxyproject.org%2Ftopics%2Fcontributing%2Ftutorials%2Fcreate-new-tutorial-technical%2Ftutorial.html&edit-text=&act=url" title="">
                                PT
                            </a>
                            
                            <a class="dropdown-item" href="https://translate.google.com/translate?hl=jp&sl=en&tl=ar&u=https%3A%2F%2Ftraining.galaxyproject.org%2Ftopics%2Fcontributing%2Ftutorials%2Fcreate-new-tutorial-technical%2Ftutorial.html&edit-text=&act=url" title="">
                                AR
                            </a>
                            
                        </div>
                    </li>

                    <li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" title="Help">
        <i class="fa fa-life-ring" aria-hidden="true"></i><span class="visually-hidden">help</span> Help
    </a>
    <div class="dropdown-menu dropdown-menu-right">
        <form method="get" action="https://tess.elixir-europe.org/materials">
            <input type="text" id="search" name="q" value="" style="margin-left: 0.5em;/*! border-radius: 0px; */">
            <input type="hidden" value="Galaxy Training" name="content_provider">
            <input type="submit" value="Search on TeSS" style="width: 92%;border-radius: 0px;margin: 0.5em;background: #f47d20;border: 0px;padding: 0.25em;" class="">
        </form>

        <div class="dropdown-divider"></div>
        <a class="dropdown-item" href="/training-material/faq" title="Check our FAQ">
            FAQ
        </a>
        <a class="dropdown-item" href="https://gitter.im/Galaxy-Training-Network/Lobby" title="Chat on Gitter">
            Chat on Gitter
        </a>
        <a class="dropdown-item" href="https://help.galaxyproject.org/" title="Discuss on Galaxy Help">
            Discuss on Galaxy Help
        </a>
    </div>
</li>


                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/galaxyproject/training-material/edit/master/topics/contributing/tutorials/create-new-tutorial-technical/tutorial.md">
                            <i class="fa fa-github" aria-hidden="true"></i><span class="visually-hidden">github</span> Edit
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div class="container main-content">
    <script type="application/ld+json">
        


{
  "@context": "http://schema.org",
  "@type": "Course",
  "accessMode": [
    "textual",
    "visual"
  ],
  "accessModeSufficient": [
    "textual",
    "visual"
  ],
  "accessibilityControl": [
    "fullKeyboardControl",
    "fullMouseControl"
  ],
  "accessibilityFeature": [
    "alternativeText",
    "tableOfContents"
  ],
  "accessibilitySummary": "Short descriptions are present but long descriptions will be needed for non-visual users",
  "audience": {
    "@type": "EducationalAudience",
    "educationalRole": "students"
  },
  "citation": {
    "@type": "CreativeWork",
    "name": "Community-Driven Data Analysis Training for Biology",
    "url": "https://doi.org/10.1016/j.cels.2018.05.012"
  },
  "copyrightHolder": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "discussionUrl": "https://gitter.im/Galaxy-Training-Network/Lobby",
  "headline": "Creating a new tutorial - Defining the technical infrastructure",
  "inLanguage": {
    "@type": "Language",
    "name": "English",
    "alternateName": "en"
  },
  "interactivityType": "mixed",
  "isAccessibleForFree": true,
  "license": "/blob//LICENSE.md",
  "producer": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "provider": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "sourceOrganization": {
    "@type": "Organization",
    "email": "galaxytrainingnetwork@gmail.com",
    "name": "Galaxy Training Network",
    "url": "https://galaxyproject.org/teach/gtn/"
  },
  "courseCode": "contributing / create-new-tutorial-technical / hands-on",
  "learningResourceType": "hands-on tutorial",
  "name": "Hands-on for 'Creating a new tutorial - Defining the technical infrastructure' tutorial",
  "isPartOf": {
    "@type": "Course",
    "name": "Creating a new tutorial - Defining the technical infrastructure",
    "description": "Creating a new tutorial - Defining the technical infrastructure",
    "learningResourceType": "tutorial",
    "interactivityType": "expositive",
    "provider": {
      "@type": "Organization",
      "email": "galaxytrainingnetwork@gmail.com",
      "name": "Galaxy Training Network",
      "url": "https://galaxyproject.org/teach/gtn/"
    }
  },
  "url": "https://galaxyproject.github.io//training-material/topics/contributing/tutorials/create-new-tutorial-technical/tutorial.html",
  "timeRequired": "PT30M",
  "description": "Creating a new tutorial - Defining the technical infrastructure\\nThe questions this  addresses are:\n - How can we define the technical infrastructure for a tutorial?\n - How to define the tools needed for a tutorial?\n - How to add the needed data directly in an instance?\n - How to add the workflows related to a tutorial?\n - How can we check the technical infrastructure is working?\n - How can we make an existing Galaxy instance able to run a tutorial?\n\n\\nThe objectives are:\n - Extracting the technical description for a tutorial\n - Populating an existing instance with the needed tools, data and workflows for a tutorial\n - Creating a Galaxy Docker flavor with the needed tools, data and workflows for a tutorial\n - Testing the Galaxy Docker flavor of a tutorial\n\n",
  "hasPart": [

  ],
  "mentions": [

  ],
  "author": [
    {
      "@type": "Person",
      "name": "Bérénice Batut"
    },
    {
      "@type": "Person",
      "name": "Björn Grüning"
    },
    {
      "@type": "Person",
      "name": "Saskia Hiltemann"
    },
    {
      "@type": "Person",
      "name": "Helena Rasche"
    }
  ],
  "contributor": [
    {
      "@type": "Person",
      "name": "Bérénice Batut"
    },
    {
      "@type": "Person",
      "name": "Björn Grüning"
    },
    {
      "@type": "Person",
      "name": "Saskia Hiltemann"
    },
    {
      "@type": "Person",
      "name": "Helena Rasche"
    }
  ],
  "about": [
    {
      "@type": "CreativeWork",
      "name": "Contributing to the Galaxy Training Material",
      "description": "Galaxy is a great solution to train the bioinformatics concepts: numerous bioinformatics tools are available (almost 5,000 in the ToolShed), it can be used by people without amy computer science skills, it trains to use technology, outlining available resources and efforts that have made them accessible to researchers, it is scalable.<br> In 2016, the Galaxy Training Network decide to set up a new infrastructure for delivering easily Galaxy related training material. The idea was to develop something open and online based on a community effort, as always in Galaxy.",
      "url": "https://galaxyproject.github.io//training-material/topics/contributing/"
    }
  ]
}
    </script>

    <section class="tutorial">
        <h1 data-toc-skip>Creating a new tutorial - Defining the technical infrastructure</h1>
        <div class="contributors-line">By: 

<a href="/training-material/hall-of-fame#bebatut" class="contributor-badge"><img src="https://avatars.githubusercontent.com/bebatut" alt="Bérénice Batut">Bérénice Batut</a>, <a href="/training-material/hall-of-fame#bgruening" class="contributor-badge"><img src="https://avatars.githubusercontent.com/bgruening" alt="Björn Grüning">Björn Grüning</a>, <a href="/training-material/hall-of-fame#shiltemann" class="contributor-badge"><img src="https://avatars.githubusercontent.com/shiltemann" alt="Saskia Hiltemann">Saskia Hiltemann</a>, <a href="/training-material/hall-of-fame#erasche" class="contributor-badge"><img src="https://avatars.githubusercontent.com/erasche" alt="Helena Rasche">Helena Rasche</a>

</div>
        <blockquote class="overview">
            <h3>Overview</h3>
            <strong><i class="fa fa-question-circle" aria-hidden="true"></i><span class="visually-hidden">question</span> Questions</strong>
            <ul>
            
            <li>How can we define the technical infrastructure for a tutorial?</li>
            
            <li>How to define the tools needed for a tutorial?</li>
            
            <li>How to add the needed data directly in an instance?</li>
            
            <li>How to add the workflows related to a tutorial?</li>
            
            <li>How can we check the technical infrastructure is working?</li>
            
            <li>How can we make an existing Galaxy instance able to run a tutorial?</li>
            
            </ul>

            <strong><i class="fa fa-bullseye" aria-hidden="true"></i><span class="visually-hidden">objectives</span> Objectives</strong>
            <ul>
            
            <li>Extracting the technical description for a tutorial</li>
            
            <li>Populating an existing instance with the needed tools, data and workflows for a tutorial</li>
            
            <li>Creating a Galaxy Docker flavor with the needed tools, data and workflows for a tutorial</li>
            
            <li>Testing the Galaxy Docker flavor of a tutorial</li>
            
            </ul>

            

            
            <p><strong><i class="fa fa-hourglass-end" aria-hidden="true"></i><span class="visually-hidden">time</span> Time estimation:</strong> 30 minutes</p>
            

            



            <div>
                <div><strong><i class="fa fa-external-link" aria-hidden="true"></i> Supporting Materials</strong></div>
                <div id="supporting_materials">
                    <ul>
                        <li>
                            <div>
                    
                    <div>
                        <a class="topic-icon" href="/training-material/topics/contributing/slides/introduction.html" title="Introduction slides">
                            <i class="fa fa-slideshare" aria-hidden="true"></i><span class="visually-hidden">slides</span> Introduction Slides
                        </a>
                    </div>
                    

                    

                    
                    


                    
                            </div>
                        </li>
                    </ul>
                </div>

            </div>

        </blockquote>

        <div class="container">
            <div class="row">
                <!-- sidebar, which will move to the top on a small screen -->
                <div class="col-sm-2">
                    <nav id="toc" data-toggle="toc" class="sticky-top"></nav>
                </div>
                <div class="col-sm-10">
                    <h1 class="no_toc" id="building-a-galaxy-instance-specifically-for-your-training">Building a Galaxy instance specifically for your training</h1>

<p>To be able to run the tutorial, we need a Galaxy instance where all of the needed tools and data are available. Thus we need to describe the needed technical infrastructure.</p>

<p>This files we define in this tutorial will be used to automatically build a Docker Galaxy flavour, and also to test if a public Galaxy instance is able to run the tool.</p>

<p>In this tutorial, you will learn how to create a virtualised Galaxy instance, based on Docker, to run your training - either on normal computers or cloud environments.</p>

<blockquote class="agenda">
  <h3 id="agenda">Agenda</h3>

  <p>In this tutorial, we will deal with:</p>

<ol id="markdown-toc">
  <li><a href="#extracting-workflows" id="markdown-toc-extracting-workflows">Extracting workflows</a>    <ol>
      <li><a href="#testing-the-workflow-recommended" id="markdown-toc-testing-the-workflow-recommended">Testing the workflow (recommended)</a></li>
    </ol>
  </li>
  <li><a href="#creating-the-data-libraryyaml-recommended" id="markdown-toc-creating-the-data-libraryyaml-recommended">Creating the <code class="highlighter-rouge">data-library.yaml</code> (recommended)</a></li>
  <li><a href="#creating-the-data-manageryaml-optional" id="markdown-toc-creating-the-data-manageryaml-optional">Creating the <code class="highlighter-rouge">data-manager.yaml</code> (optional)</a></li>
  <li><a href="#creating-the-galaxy-interactive-tour-optional" id="markdown-toc-creating-the-galaxy-interactive-tour-optional">Creating the Galaxy Interactive Tour (optional)</a></li>
  <li><a href="#testing-the-technical-infrastructure" id="markdown-toc-testing-the-technical-infrastructure">Testing the technical infrastructure</a></li>
</ol>

</blockquote>

<h1 id="extracting-workflows">Extracting workflows</h1>

<p>Once the tutorial is ready, we need to develop a workflow that represents the steps taken in the tutorial, and then extract these workflow(s) and add them to the <code class="highlighter-rouge">workflows</code> directory in the tutorial. Additionally we will need to add some explanation about the workflow(s) in a <code class="highlighter-rouge">README.md</code> file</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-extract-the-workflow"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Extract the workflow</h3>

  <ol>
    <li>Download the workflow for the tutorial</li>
    <li>Save it in the <code class="highlighter-rouge">workflow</code> directory of the tutorial</li>
  </ol>
</blockquote>

<h2 id="testing-the-workflow-recommended">Testing the workflow (recommended)</h2>

<p>Workflow testing is a great way to get feedback that your tutorial can be run successfully on a given server. When you’re giving a training this can provide peace of mind, not only are the tools installed (as is indicated by the badges we provide) but they also work.</p>

<p>Given the workflow you created above and have included in the tutorial folder, you’ll need to create a corresponding <code class="highlighter-rouge">-test.yml</code> file.</p>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-creating-the--testyml-file-for-your-workflow"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Creating the <code class="highlighter-rouge">-test.yml</code> file for your workflow</h3>

  <ol>
    <li>
      <p>Find the correct name for the file; if your workflow was <code class="highlighter-rouge">unicycler.ga</code>, then your test file should be <code class="highlighter-rouge">unicycler-test.yml</code>, they need to share the same prefix.</p>
    </li>
    <li>
      <p>Create the following structure:</p>

      <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="pi">-</span> <span class="na">doc</span><span class="pi">:</span> <span class="s">Test sample data for the workflow</span>
  <span class="na">job</span><span class="pi">:</span>
    <span class="na">an_input_file</span><span class="pi">:</span>
      <span class="na">class</span><span class="pi">:</span> <span class="s">File</span>
      <span class="na">location</span><span class="pi">:</span> <span class="s">https://....</span>
      <span class="na">filetype</span><span class="pi">:</span> <span class="s">fasta</span>
  <span class="na">outputs</span><span class="pi">:</span>
    <span class="na">ffn</span><span class="pi">:</span>
      <span class="na">asserts</span><span class="pi">:</span>
        <span class="na">has_text</span><span class="pi">:</span>
          <span class="na">text</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&gt;A"</span>
        <span class="na">has_text</span><span class="pi">:</span>
          <span class="na">text</span><span class="pi">:</span> <span class="s2">"</span><span class="s">&gt;B"</span>
</code></pre></div>      </div>
    </li>
  </ol>

</blockquote>

<p>You’ll need to edit the <code class="highlighter-rouge">job</code> and <code class="highlighter-rouge">outputs</code> sections according to your workflow’s inputs and outputs. Additionally you will need to edit the steps of your workflow <code class="highlighter-rouge">.ga</code> file appropriately.</p>

<h3 id="inputs">Inputs</h3>

<p>Your workflow <strong>must</strong> use “Data Inputs” for each input dataset. For each of these input step in the <code class="highlighter-rouge">.ga</code> file, you’ll need to do the following:</p>

<ol>
  <li>Edit the <code class="highlighter-rouge">label</code></li>
  <li>Edit the <code class="highlighter-rouge">name</code></li>
  <li>Edit the <code class="highlighter-rouge">inputs[0].name</code></li>
  <li>Edit the <code class="highlighter-rouge">tool_state</code></li>
</ol>

<p>In a normal workflow you have exported from Galaxy, you’ll see something like</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"input_connections"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patient1_ChIP_ER_good_outcome.bam"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Input dataset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"left"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"top"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tool_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tool_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">patient1_ChIP_ER_good_outcome.bam</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tool_version"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>You should synchronize the aforementioned fields so it looks like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"input_connections"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"inputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_outcome"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_outcome"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_outcome"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"left"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"top"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"tool_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tool_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">good_outcome</span><span class="se">\"</span><span class="s2">}"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tool_version"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This will allow you to specify <code class="highlighter-rouge">good_outcome</code> in your job to load a file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- doc: ...
  job:
    good_outcome:
      class: File
      location: ...
      filetype: ...
</code></pre></div></div>

<p>The filetype should be the Galaxy datatype of your file, for example <code class="highlighter-rouge">fastqsanger</code>, <code class="highlighter-rouge">tabular</code>, <code class="highlighter-rouge">bam</code>.</p>

<h3 id="outputs">Outputs</h3>

<p>For the outputs the process is somewhat simpler:</p>

<ol>
  <li>Identify a step, the outputs of which you would like to test</li>
  <li>
    <p>Convert the relevant <code class="highlighter-rouge">outputs</code> to <code class="highlighter-rouge">workflow_outputs</code></p>

    <p>In a normal workflow you see</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"txt"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ofile"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"txt"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ofile2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"workflow_outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>

    <p>If you want to test the contents of <code class="highlighter-rouge">ofile</code>, you should change it to</p>

    <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"txt"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ofile"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"txt"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ofile2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"workflow_outputs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="s2">"output_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ofile"</span><span class="p">,</span><span class="w"> </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_output"</span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>You can now use the label you chose (here <code class="highlighter-rouge">my_output</code>) in your test case:</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">doc</span><span class="pi">:</span>
  <span class="na">job</span><span class="pi">:</span> <span class="s">...</span>
  <span class="na">outputs</span><span class="pi">:</span>
    <span class="na">my_output</span><span class="pi">:</span>
      <span class="na">asserts</span><span class="pi">:</span>
        <span class="na">has_text</span><span class="pi">:</span>
          <span class="na">text</span><span class="pi">:</span> <span class="s1">'</span><span class="s">some-string'</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="running-the-tests">Running the Tests</h3>

<p>You can test the file you’ve written with the following command and a recent version (&gt;=0.56.0) of planemo:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">planemo test \
	--galaxy_url "$</span>GALAXY_URL<span class="s2">" </span><span class="se">\</span><span class="s2">
	--galaxy_user_key "</span><span class="nv">$GALAXY_USER_KEY</span><span class="s2">" </span><span class="se">\</span><span class="s2">
	--no_shed_install </span><span class="se">\</span><span class="s2">
	--engine external_galaxy </span><span class="se">\</span><span class="s2">
	workflow.ga
</span></code></pre></div></div>

<p>Planemo will autodetect that the <code class="highlighter-rouge">workflow-test.yml</code> file and load that for the testing.</p>

<h1 id="creating-the-data-libraryyaml-recommended">Creating the <code class="highlighter-rouge">data-library.yaml</code> (recommended)</h1>

<p>The datasets needed for a tutorial can also be integrated in the Galaxy instance inside of data libraries. These allow the datasets to be easily shared with all users of a Galaxy instance. Additionally it lets trainees avoid each re-downloading the input data.</p>

<p>These datasets are described in the <code class="highlighter-rouge">data-library.yaml</code> files:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">destination</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">library</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">GTN - Material</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">Galaxy Training Network Material</span>
  <span class="na">synopsis</span><span class="pi">:</span> <span class="s">Galaxy Training Network Material. See https://training.galaxyproject.org</span>
<span class="na">items</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Title of the topic</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">Summary of the topic</span>
  <span class="na">items</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Title of the tutorial</span>
    <span class="na">items</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">DOI:</span><span class="nv"> </span><span class="s">10.5281/zenodo....'</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">latest</span>
      <span class="na">items</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">info</span><span class="pi">:</span> <span class="s">https://doi.org/10.5281/zenodo....</span>
        <span class="na">url</span><span class="pi">:</span> <span class="s">https://zenodo.org/api/files/URL/to/the/input/file</span>
        <span class="na">ext</span><span class="pi">:</span> <span class="s">galaxy-datatype</span>
        <span class="na">src</span><span class="pi">:</span> <span class="s">url</span>
</code></pre></div></div>

<blockquote class="notranslate hands_on">
  <h3 id="hands_on-hands-on-creating-the-data-libraryyaml"><i class="fa fa-pencil" aria-hidden="true"></i><span class="visually-hidden">hands_on</span> Hands-on: Creating the <code class="highlighter-rouge">data-library.yaml</code></h3>

  <ol>
    <li>Copy the Zenodo link</li>
    <li>
      <p>Generate the <code class="highlighter-rouge">data-library.yaml</code> file and update the tutorial metadata with the link:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ planemo training_fill_data_library \
         --topic_name "my-topic" \
         --tutorial_name "my-new-tutorial" \
         --zenodo_link "URL to the Zenodo record"
</code></pre></div>      </div>
    </li>
    <li>Check that the <code class="highlighter-rouge">data-library.yaml</code> has been generated (or updated)</li>
    <li>Check tha the Zenodo link is in the metadata at the top of the <code class="highlighter-rouge">tutorial.md</code></li>
  </ol>
</blockquote>

<h1 id="creating-the-data-manageryaml-optional">Creating the <code class="highlighter-rouge">data-manager.yaml</code> (optional)</h1>

<p>Some of the tools may require specific databases, specifically prepared for the tool. In this case, some Galaxy tools come with “data managers” to simplify this process.</p>

<p>If you need such data managers for your training, then you should describe how to run them in the <code class="highlighter-rouge">data-manager.yaml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">data_managers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">url to data manager on ToolShed</span>
      <span class="na">params</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s1">'</span><span class="s">param1'</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>
        <span class="pi">-</span> <span class="s1">'</span><span class="s">param2'</span><span class="pi">:</span> <span class="s1">'</span><span class="s">value'</span>
      <span class="c1"># Items refer to a list of variables you want to run this data manager. You can use them inside the param field with </span>
      <span class="c1"># In case of genome for example you can run this DM with multiple genomes, or you could give multiple URLs.</span>
      <span class="na">items</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">item1</span>
        <span class="pi">-</span> <span class="s">item2</span>
      <span class="c1"># Name of the data-tables you want to reload after your DM are finished. This can be important for subsequent data managers</span>
      <span class="na">data_table_reload</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">all_fasta</span>
        <span class="pi">-</span> <span class="s">__dbkeys__</span>
</code></pre></div></div>

<h1 id="creating-the-galaxy-interactive-tour-optional">Creating the Galaxy Interactive Tour (optional)</h1>

<p>A Galaxy Interactive Tour is a way to go through an entire analysis, step by step inside Galaxy in an interactive and explorative way.
It is a great way to help users run the tutorial directly inside Galaxy. To learn more about creating a Galaxy tour please have a look at our <a href="/training-material/topics/contributing/tutorials/create-new-tutorial-tours/tutorial.html">dedicated tour training</a>.</p>

<h1 id="testing-the-technical-infrastructure">Testing the technical infrastructure</h1>

<p>Once we have defined all the requirements for running the tutorial, we can test these requirements, either in a locally running Galaxy or in a Docker container. Please see our tutorial about <a href="/training-material/topics/instructors/tutorials/setup-galaxy-for-training/tutorial.html">Setting up Galaxy for Training</a> about how to test your tutorial requirements.</p>

<h1 class="no_toc" id="conclusion">Conclusion</h1>



                    
                    <blockquote class="key_points">
                        <h3><i class="fa fa-key" aria-hidden="true"></i><span class="visually-hidden">keypoints</span> Key points</h3>

                        <ul>
                            
                            <li>Tools, data and workflows can be easily integrated in a Docker flavor to have a useful technical support for a tutorial</li>
                            
                            <li>A Galaxy Docker flavor is a great support for training</li>
                            
                            <li>A Galaxy Docker flavor can be deployed 'anywhere' and is scalable</li>
                            
                        </ul>
                    </blockquote>
                    

                    

                    

                </div>
            </div>
        </div>

        <h3><i class="fa fa-thumbs-up" aria-hidden="true"></i><span class="visually-hidden">congratulations</span> Congratulations on successfully completing this tutorial!</h3>

        
        <blockquote class="agenda">
            <h3>Developing GTN training material</h3>
            This tutorial is part of a series to develop GTN training material, feel free to also look at:
            
            <ol>
            
                
                    
            <li><a href="/training-material/topics/contributing/slides/introduction.html">Overview of the Galaxy Training Material</a></li>
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/github-command-line-contribution/tutorial.html">Contributing with GitHub via command-line</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/github-interface-contribution/tutorial.html">Contributing with GitHub via its interface</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/create-new-tutorial/tutorial.html">Creating a new tutorial</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/create-new-tutorial-tours/tutorial.html">Creating a new tutorial - Creating Interactive Galaxy Tours</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/create-new-tutorial-technical/tutorial.html">Creating a new tutorial - Defining the technical infrastructure</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/create-new-tutorial-slides/slides.html">Creating a new tutorial - Slides</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/create-new-tutorial-content/tutorial.html">Creating a new tutorial - Writing content in Markdown</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/generating-pdf/tutorial.html">Generating PDF artefacts of the website</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/create-new-topic/tutorial.html">Including a new topic</a></li>
                        
                    
                
            
                
                    
                        
            <li><a href="/training-material/topics/contributing/tutorials/running-jekyll/tutorial.html">Running the Galaxy Training material website locally</a></li>
                        
                    
                
            
            </ol>
        </blockquote>
        

        

        <hr>
        <br>

        <iframe id="feedback-google" class="google-form" src="https://docs.google.com/forms/d/e/1FAIpQLSd4VZptFTQ03kHkMz0JyW9b6_S8geU5KjNE_tLM0dixT3ZQmA/viewform?embedded=true&entry.1235803833=Creating a new tutorial - Defining the technical infrastructure (Contributing to the Galaxy Training Material)">Loading...
        </iframe>

        <blockquote class="feedback">
            <h3><i class="fa fa-comments-o" aria-hidden="true"></i><span class="visually-hidden">feedback</span> Give us even more feedback on this content!</h3>
            <p>To give us more detailed feedback about these materials, please take a moment to fill in the extended <a href="https://docs.google.com/forms/d/e/1FAIpQLSc_GLZRpxZGAL9tN6DA1bE6WkNhmQdXT7B16TpOb-X4YwKUsQ/viewform?entry.1548889262=Creating a new tutorial - Defining the technical infrastructure (Contributing to the Galaxy Training Material)">Feedback Form</a>.</p>
        </blockquote>
    </section>
</div>


<footer>
    <div class="container">
        <p>
            This material is the result of a collaborative work. Thanks to the
            <a href="https://wiki.galaxyproject.org/Teach/GTN">Galaxy Training Network</a>
            and all the <a href="/training-material/hall-of-fame">contributors</a> (Bérénice Batut, Björn Grüning, Saskia Hiltemann, Helena Rasche)!
        </p>
        <p>
            Found a typo? Something is wrong in this tutorial? Edit it on
            <a href="https://github.com/galaxyproject/training-material/tree/master/topics/contributing/tutorials/create-new-tutorial-technical/tutorial.md">GitHub</a>.
        </p>
    </div>
</footer>

    </body>
    <script type="text/javascript" src="/training-material/assets/js/jquery.slim.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/popper.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap.min.js?v=3"></script>
    <script type="text/javascript" src="/training-material/assets/js/details-element-polyfill.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="/training-material/assets/js/bootstrap-toc.min.js"></script>
    <script type="text/javascript" src="/training-material/assets/js/main.js"></script>

    <script type="text/javascript" src="/training-material/assets/js/clipboard.min.js"></script>
    <script type="text/javascript">
    var snippets=document.querySelectorAll('div.highlight');
    [].forEach.call(snippets,function(snippet){
        snippet.firstChild.insertAdjacentHTML('beforebegin','<button class="btn btn-light" data-clipboard-snippet><i class="fa fa-copy"></i>&nbsp;Copy</button>');
    });

    var clipboardSnippets=new ClipboardJS('[data-clipboard-snippet]',{
        target:function(trigger){return trigger.nextElementSibling;
    }});
    </script>
</html>
